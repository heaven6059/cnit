<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cnit.yoyo.dao.shop.CompanyMapper">
	<resultMap id="BaseResultMap" type="com.cnit.yoyo.model.goods.Company">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		<id column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="grade_id" property="gradeId" jdbcType="BIGINT" />
		<result column="shop_name" property="shopName" jdbcType="VARCHAR" />
		<result column="account_id" property="accountId" jdbcType="INTEGER" />
		<result column="store_name" property="storeName" jdbcType="VARCHAR" />
		<result column="store_grade" property="storeGrade" jdbcType="BIGINT" />
		<result column="region_id" property="regionId" jdbcType="BIGINT" />
		<result column="last_time" property="lastTime" jdbcType="TIMESTAMP" />
		<result column="earnest" property="earnest" jdbcType="DOUBLE" />
		<result column="company_name" property="companyName" jdbcType="VARCHAR" />
		<result column="company_no" property="companyNo" jdbcType="VARCHAR" />
		<result column="company_taxno" property="companyTaxno" jdbcType="VARCHAR" />
		<result column="company_codename" property="companyCodename" jdbcType="VARCHAR" />
		<result column="company_idname" property="companyIdname" jdbcType="VARCHAR" />
		<result column="company_idcard" property="companyIdcard" jdbcType="VARCHAR" />
		<result column="company_cname" property="companyCname" jdbcType="VARCHAR" />
		<result column="company_cidcard" property="companyCidcard" jdbcType="VARCHAR" />
		<result column="company_charge" property="companyCharge" jdbcType="VARCHAR" />
		<result column="company_ctel" property="companyCtel" jdbcType="VARCHAR" />
		<result column="company_area" property="companyArea" jdbcType="VARCHAR" />
		<result column="company_addr" property="companyAddr" jdbcType="VARCHAR" />
		<result column="company_carea" property="companyCarea" jdbcType="VARCHAR" />
		<result column="company_caddr" property="companyCaddr" jdbcType="VARCHAR" />
		<result column="company_earnest" property="companyEarnest" jdbcType="VARCHAR" />
		<result column="company_time" property="companyTime" jdbcType="TIMESTAMP" />
		<result column="company_timestart" property="companyTimestart" jdbcType="TIMESTAMP" />
		<result column="company_timeend" property="companyTimeend" jdbcType="TIMESTAMP" />
		<result column="shopstatus" property="shopstatus" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="approved" property="approved" jdbcType="VARCHAR" />
		<result column="certification" property="certification" jdbcType="VARCHAR" />
		<result column="recommend" property="recommend" jdbcType="VARCHAR" />
		<result column="disabled" property="disabled" jdbcType="VARCHAR" />
		<result column="last_modify" property="lastModify" jdbcType="TIMESTAMP" />
		<result column="d_order" property="dOrder" jdbcType="INTEGER" />
		<result column="image" property="image" jdbcType="VARCHAR" />
		<result column="image_id" property="imageId" jdbcType="VARCHAR" />
		<result column="image_cid" property="imageCid" jdbcType="VARCHAR" />
		<result column="image_codeid" property="imageCodeid" jdbcType="VARCHAR" />
		<result column="image_taxid" property="imageTaxid" jdbcType="VARCHAR" />
		<result column="approve_time" property="approveTime" jdbcType="TIMESTAMP" />
		<result column="approved_time" property="approvedTime" jdbcType="TIMESTAMP" />
		<result column="apply_time" property="applyTime" jdbcType="TIMESTAMP" />
		<result column="fav_count" property="favCount" jdbcType="INTEGER" />
		<result column="buy_m_count" property="buyMCount" jdbcType="INTEGER" />
		<result column="store_space" property="storeSpace" jdbcType="BIGINT" />
		<result column="store_usedspace" property="storeUsedspace" jdbcType="BIGINT" />
		<result column="experience" property="experience" jdbcType="INTEGER" />
		<result column="alert_num" property="alertNum" jdbcType="DECIMAL" />
		<result column="limit_goods" property="limitGoods" jdbcType="VARCHAR" />
		<result column="limit_goodsdown" property="limitGoodsdown" jdbcType="VARCHAR" />
		<result column="limit_news" property="limitNews" jdbcType="VARCHAR" />
		<result column="limit_news_value" property="limitNewsValue" jdbcType="INTEGER" />
		<result column="limit_store" property="limitStore" jdbcType="VARCHAR" />
		<result column="limit_storedown" property="limitStoredown" jdbcType="VARCHAR" />
		<result column="limit_sales" property="limitSales" jdbcType="VARCHAR" />
		<result column="limit_earnest" property="limitEarnest" jdbcType="VARCHAR" />
		<result column="store_cert" property="storeCert" jdbcType="VARCHAR" />
		<result column="bank_name" property="bankName" jdbcType="VARCHAR" />
		<result column="bank_cardid" property="bankCardid" jdbcType="VARCHAR" />
		<result column="isCheck" property="isCheck" jdbcType="VARCHAR" />
		<result column="company_area_ids" property="companyAreaIds" jdbcType="VARCHAR" />
		<result column="company_carea_ids" property="companyCareaIds" jdbcType="VARCHAR" />
		<result column="company_type" property="companyType" jdbcType="VARCHAR" />
		<result column="company_phone" property="companyPhone" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="CompanyDTOResultMap" type="com.cnit.yoyo.model.goods.dto.CompanyDTO">
		<id column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="grade_id" property="gradeId" jdbcType="BIGINT" />
		<result column="shop_name" property="shopName" jdbcType="VARCHAR" />
		<result column="account_id" property="accountId" jdbcType="INTEGER" />
		<result column="store_name" property="storeName" jdbcType="VARCHAR" />
		<result column="store_grade" property="storeGrade" jdbcType="BIGINT" />
		<result column="region_id" property="regionId" jdbcType="BIGINT" />
		<result column="last_time" property="lastTime" jdbcType="VARCHAR" />
		<result column="earnest" property="earnest" jdbcType="DOUBLE" />
		<result column="company_name" property="companyName" jdbcType="VARCHAR" />
		<result column="company_no" property="companyNo" jdbcType="VARCHAR" />
		<result column="company_taxno" property="companyTaxno" jdbcType="VARCHAR" />
		<result column="company_codename" property="companyCodename" jdbcType="VARCHAR" />
		<result column="company_idname" property="companyIdname" jdbcType="VARCHAR" />
		<result column="company_idcard" property="companyIdcard" jdbcType="VARCHAR" />
		<result column="company_cname" property="companyCname" jdbcType="VARCHAR" />
		<result column="company_cidcard" property="companyCidcard" jdbcType="VARCHAR" />
		<result column="company_charge" property="companyCharge" jdbcType="VARCHAR" />
		<result column="company_ctel" property="companyCtel" jdbcType="VARCHAR" />
		<result column="company_area" property="companyArea" jdbcType="VARCHAR" />
		<result column="company_addr" property="companyAddr" jdbcType="VARCHAR" />
		<result column="company_carea" property="companyCarea" jdbcType="VARCHAR" />
		<result column="company_caddr" property="companyCaddr" jdbcType="VARCHAR" />
		<result column="company_earnest" property="companyEarnest" jdbcType="VARCHAR" />
		<result column="company_time" property="companyTime" jdbcType="VARCHAR" />
		<result column="company_timestart" property="companyTimestart" jdbcType="VARCHAR" />
		<result column="company_timeend" property="companyTimeend" jdbcType="VARCHAR" />
		<result column="last_modify" property="lastModify" jdbcType="VARCHAR" />
		<result column="image" property="image" jdbcType="VARCHAR" />
		<result column="image_id" property="imageId" jdbcType="VARCHAR" />
		<result column="image_cid" property="imageCid" jdbcType="VARCHAR" />
		<result column="image_codeid" property="imageCodeid" jdbcType="VARCHAR" />
		<result column="image_taxid" property="imageTaxid" jdbcType="VARCHAR" />
		<result column="approve_time" property="approveTime" jdbcType="VARCHAR" />
		<result column="approved_time" property="approvedTime" jdbcType="VARCHAR" />
		<result column="apply_time" property="applyTime" jdbcType="VARCHAR" />
		<result column="bank_name" property="bankName" jdbcType="VARCHAR" />
		<result column="bank_cardid" property="bankCardid" jdbcType="VARCHAR" />
		<result column="company_remark" property="companyRemark" jdbcType="LONGVARCHAR" />
		<result column="company_url" property="companyUrl" jdbcType="LONGVARCHAR" />
		<result column="store_idcardname" property="storeIdcardname" jdbcType="VARCHAR" />
		<result column="store_idcard" property="storeIdcard" jdbcType="VARCHAR" />
		<result column="tel" property="tel" jdbcType="VARCHAR" />
		<result column="login_name" property="loginName" jdbcType="VARCHAR" />
		<result column="shopstatus" property="shopstatus" jdbcType="VARCHAR" />
		<result column="email" property="email" jdbcType="VARCHAR" />
		<result column="issue_money" property="issueMoney" jdbcType="VARCHAR" />
		<result column="experience" property="experience" jdbcType="INTEGER" />
		<result column="approved" property="approved" jdbcType="VARCHAR" />
		<result column="issue_type" property="issueType" jdbcType="VARCHAR" />
		<result column="isCheck" property="isCheck" jdbcType="VARCHAR" />
		<result column="catIds" property="catIds" jdbcType="VARCHAR" />
		<result column="company_area_ids" property="companyAreaIds" jdbcType="VARCHAR" />
		<result column="company_carea_ids" property="companyCareaIds" jdbcType="VARCHAR" />
		<result column="company_type" property="companyType" jdbcType="VARCHAR" />
		<result column="company_phone" property="companyPhone" jdbcType="VARCHAR" />
		<result column="regionCatName" property="regionCatName" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="Companydto_Column_List">
		t_company.company_id, t_company.grade_id, t_company.shop_name, t_company.account_id,
		t_company.store_name,
		t_company.store_grade, t_company.region_id,
		t_company.last_time,
		t_company.earnest, t_company.company_name, t_company.company_no, t_company.company_taxno,
		t_company.company_codename, t_company.company_idname,
		t_company.company_idcard,
		t_company.company_cname, t_company.company_cidcard, t_company.company_charge,
		t_company.company_ctel, t_company.company_area,company_area_ids,company_carea_ids,
		t_company.company_addr, t_company.company_carea,
		t_company.company_caddr, t_company.company_earnest,
		t_company.company_time,
		t_company.company_timestart,
		t_company.company_timeend,
		t_company.last_modify, t_company.image,
		t_company.image_id, t_company.image_cid, t_company.image_codeid,
		t_company.image_taxid,
		t_company.approve_time,
		t_company.approved_time, t_company.apply_time, t_company.bank_name,company_type,company_phone,
		t_company.bank_cardid , t_company.company_remark,
		t_company.company_url, t_company.remark
	</sql>


	<resultMap id="ResultMapWithBLOBs" type="com.cnit.yoyo.model.goods.CompanyWithBLOBs"
		extends="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		<result column="company_remark" property="companyRemark" jdbcType="LONGVARCHAR" />
		<result column="company_url" property="companyUrl" jdbcType="LONGVARCHAR" />
		<result column="remark" property="remark" jdbcType="LONGVARCHAR" />
		<result column="approvedremark" property="approvedremark" jdbcType="LONGVARCHAR" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		company_id, grade_id, shop_name, account_id, store_name, store_grade, region_id,
		last_time,
		earnest, company_name, company_no, company_taxno, company_codename, company_idname,
		company_idcard, company_cname, company_cidcard, company_charge, company_ctel, company_area,company_area_ids,company_carea_ids
		company_addr, company_carea, company_caddr, company_earnest, company_time, company_timestart,
		company_timeend, shopstatus, status, approved, certification, recommend, disabled,
		last_modify,
		d_order, image, image_id, image_cid, image_codeid, image_taxid, approve_time,
		approved_time,
		apply_time, fav_count, buy_m_count, store_space, store_usedspace,
		experience, alert_num,
		limit_goods, limit_goodsdown, limit_news, limit_news_value,
		limit_store, limit_storedown,
		limit_sales, limit_earnest, store_cert, bank_name,company_type,company_phone,
		bank_cardid
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		company_remark, company_url, remark, approvedremark
	</sql>
	
  <select id="findSelect" resultMap="BaseResultMap">
    select 
    company_id, company_name
    from t_company
  </select>
	
	<select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from t_company
		where company_id = #{companyId,jdbcType=BIGINT}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		delete from t_company
		where company_id = #{companyId,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="com.cnit.yoyo.model.goods.CompanyWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		insert into t_company (company_id, grade_id, shop_name,
		account_id, store_name, store_grade,
		region_id, last_time, earnest,
		company_name, company_no, company_taxno,
		company_codename,
		company_idname, company_idcard,
		company_cname, company_cidcard, company_charge,
		company_ctel,
		company_area, company_addr,company_area_ids,company_carea_ids
		company_carea, company_caddr, company_earnest,
		company_time,
		company_timestart, company_timeend,
		shopstatus, status, approved,
		certification, recommend,
		disabled,
		last_modify, d_order, image,
		image_id, image_cid, image_codeid,
		image_taxid, approve_time,
		approved_time,
		apply_time, fav_count, buy_m_count,
		store_space, store_usedspace, experience,
		alert_num, limit_goods, limit_goodsdown,
		limit_news, limit_news_value, limit_store,
		limit_storedown, limit_sales, limit_earnest,
		store_cert, bank_name,company_type,company_phone, bank_cardid,
		company_remark,
		company_url, remark,
		approvedremark)
		values (#{companyId,jdbcType=BIGINT},
		#{gradeId,jdbcType=BIGINT}, #{shopName,jdbcType=VARCHAR},
		#{accountId,jdbcType=INTEGER},
		#{storeName,jdbcType=VARCHAR}, #{storeGrade,jdbcType=BIGINT},
		#{regionId,jdbcType=BIGINT},
		#{lastTime,jdbcType=TIMESTAMP}, #{earnest,jdbcType=DOUBLE},
		#{companyName,jdbcType=VARCHAR},
		#{companyNo,jdbcType=VARCHAR}, #{companyTaxno,jdbcType=VARCHAR},
		#{companyCodename,jdbcType=VARCHAR}, #{companyIdname,jdbcType=VARCHAR},
		#{companyIdcard,jdbcType=VARCHAR},
		#{companyCname,jdbcType=VARCHAR},
		#{companyCidcard,jdbcType=VARCHAR}, #{companyCharge,jdbcType=VARCHAR},
		#{companyCtel,jdbcType=VARCHAR}, #{companyArea,jdbcType=VARCHAR}, #{companyAddr,jdbcType=VARCHAR},
		#{companyAreaIds,jdbcType=VARCHAR}, #{companyCareaIds,jdbcType=VARCHAR},
		#{companyCarea,jdbcType=VARCHAR}, #{companyCaddr,jdbcType=VARCHAR},
		#{companyEarnest,jdbcType=VARCHAR},
		#{companyTime,jdbcType=TIMESTAMP},
		#{companyTimestart,jdbcType=TIMESTAMP}, #{companyTimeend,jdbcType=TIMESTAMP},
		#{shopstatus,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, #{approved,jdbcType=VARCHAR},
		#{certification,jdbcType=VARCHAR}, #{recommend,jdbcType=VARCHAR}, #{disabled,jdbcType=VARCHAR},
		#{lastModify,jdbcType=TIMESTAMP}, #{dOrder,jdbcType=INTEGER}, #{image,jdbcType=VARCHAR},
		#{imageId,jdbcType=VARCHAR}, #{imageCid,jdbcType=VARCHAR}, #{imageCodeid,jdbcType=VARCHAR},
		#{imageTaxid,jdbcType=VARCHAR}, #{approveTime,jdbcType=TIMESTAMP}, #{approvedTime,jdbcType=TIMESTAMP},
		#{applyTime,jdbcType=TIMESTAMP}, #{favCount,jdbcType=INTEGER}, #{buyMCount,jdbcType=INTEGER},
		#{storeSpace,jdbcType=BIGINT}, #{storeUsedspace,jdbcType=BIGINT}, #{experience,jdbcType=INTEGER},
		#{alertNum,jdbcType=DECIMAL}, #{limitGoods,jdbcType=VARCHAR}, #{limitGoodsdown,jdbcType=VARCHAR},
		#{limitNews,jdbcType=VARCHAR}, #{limitNewsValue,jdbcType=INTEGER}, #{limitStore,jdbcType=VARCHAR},
		#{limitStoredown,jdbcType=VARCHAR}, #{limitSales,jdbcType=VARCHAR},
		#{limitEarnest,jdbcType=VARCHAR},
		#{storeCert,jdbcType=VARCHAR}, #{bankName,jdbcType=VARCHAR},#{companyType,jdbcType=VARCHAR},#{companyPhone,jdbcType=VARCHAR},
		#{bankCardid,jdbcType=VARCHAR},
		#{isCheck,jdbcType=VARCHAR},
		#{companyRemark,jdbcType=LONGVARCHAR},
		#{companyUrl,jdbcType=LONGVARCHAR},
		#{remark,jdbcType=LONGVARCHAR},
		#{approvedremark,jdbcType=LONGVARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO"
		useGeneratedKeys="true" keyProperty="companyId">
		insert into t_company
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="gradeId != null">
				grade_id,
			</if>
			<if test="shopName != null">
				shop_name,
			</if>
			<if test="accountId != null">
				account_id,
			</if>
			<if test="storeName != null">
				store_name,
			</if>
			<if test="storeGrade != null">
				store_grade,
			</if>
			<if test="regionId != null">
				region_id,
			</if>
			<if test="lastTime != null and lastTime!=''">
				last_time,
			</if>
			<if test="earnest != null">
				earnest,
			</if>
			<if test="companyName != null">
				company_name,
			</if>
			<if test="companyNo != null">
				company_no,
			</if>
			<if test="companyTaxno != null">
				company_taxno,
			</if>
			<if test="companyCodename != null">
				company_codename,
			</if>
			<if test="companyIdname != null">
				company_idname,
			</if>
			<if test="companyIdcard != null">
				company_idcard,
			</if>
			<if test="companyCname != null">
				company_cname,
			</if>
			<if test="companyCidcard != null">
				company_cidcard,
			</if>
			<if test="companyCharge != null">
				company_charge,
			</if>
			<if test="companyCtel != null">
				company_ctel,
			</if>
			<if test="companyArea != null">
				company_area,
			</if>
			<if test="companyCareaIds != null">
				company_carea_ids,
			</if>
			<if test="companyAreaIds != null">
				company_area_ids,
			</if>
			<if test="companyAddr != null">
				company_addr,
			</if>
			<if test="companyCarea != null">
				company_carea,
			</if>
			<if test="companyCaddr != null">
				company_caddr,
			</if>
			<if test="companyEarnest != null">
				company_earnest,
			</if>
			<if test="companyTime != null and companyTime!=''">
				company_time,
			</if>
			<if test="companyTimestart != null and companyTimestart!=''">
				company_timestart,
			</if>
			<if test="companyTimeend != null and companyTimeend!=''">
				company_timeend,
			</if>

			<if test="lastModify != null and lastModify!=''">
				last_modify,
			</if>

			<if test="image != null">
				image,
			</if>
			<if test="imageId != null">
				image_id,
			</if>
			<if test="imageCid != null">
				image_cid,
			</if>
			<if test="imageCodeid != null">
				image_codeid,
			</if>
			<if test="imageTaxid != null">
				image_taxid,
			</if>
			<if test="approved != null and approved!=''">
				approved,
			</if>
			<if test="approveTime != null and approveTime!=''">
				approve_time,
			</if>
			<if test="approvedTime != null and approvedTime!=''">
				approved_time,
			</if>
			<if test="applyTime != null and applyTime!=''">
				apply_time,
			</if>

			<if test="bankName != null">
				bank_name,
			</if>
			<if test="companyType != null and companyType!=''">
				company_type,
			</if>
			<if test="companyPhone != null and companyPhone!=''">
				company_phone,
			</if>
			<if test="bankCardid != null">
				bank_cardid,
			</if>
			<if test="isCheck != null and isCheck!=''">
				isCheck,
			</if>
			<if test="companyRemark != null">
				company_remark,
			</if>
			<if test="companyUrl != null">
				company_url,
			</if>
			
			<if test="disabled != null and disabled!=''">
				disabled,
			</if>


		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="gradeId != null">
				#{gradeId,jdbcType=BIGINT},
			</if>
			<if test="shopName != null">
				#{shopName,jdbcType=VARCHAR},
			</if>
			<if test="accountId != null">
				#{accountId,jdbcType=INTEGER},
			</if>
			<if test="storeName != null">
				#{storeName,jdbcType=VARCHAR},
			</if>
			<if test="storeGrade != null">
				#{storeGrade,jdbcType=BIGINT},
			</if>
			<if test="regionId != null">
				#{regionId,jdbcType=BIGINT},
			</if>
			<if test="lastTime != null and lastTime!=''">
				date_format(#{lastTime,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s'),
			</if>
			<if test="earnest != null">
				#{earnest,jdbcType=DOUBLE},
			</if>
			<if test="companyName != null">
				#{companyName,jdbcType=VARCHAR},
			</if>
			<if test="companyNo != null">
				#{companyNo,jdbcType=VARCHAR},
			</if>
			<if test="companyTaxno != null">
				#{companyTaxno,jdbcType=VARCHAR},
			</if>
			<if test="companyCodename != null">
				#{companyCodename,jdbcType=VARCHAR},
			</if>
			<if test="companyIdname != null">
				#{companyIdname,jdbcType=VARCHAR},
			</if>
			<if test="companyIdcard != null">
				#{companyIdcard,jdbcType=VARCHAR},
			</if>
			<if test="companyCname != null">
				#{companyCname,jdbcType=VARCHAR},
			</if>
			<if test="companyCidcard != null">
				#{companyCidcard,jdbcType=VARCHAR},
			</if>
			<if test="companyCharge != null">
				#{companyCharge,jdbcType=VARCHAR},
			</if>
			<if test="companyCtel != null">
				#{companyCtel,jdbcType=VARCHAR},
			</if>
			<if test="companyArea != null">
				#{companyArea,jdbcType=VARCHAR},
			</if>
			<if test="companyCareaIds != null">
				#{companyCareaIds,jdbcType=VARCHAR},
			</if>
			<if test="companyAreaIds != null">
				#{companyAreaIds,jdbcType=VARCHAR},
			</if>
			<if test="companyAddr != null">
				#{companyAddr,jdbcType=VARCHAR},
			</if>
			<if test="companyCarea != null">
				#{companyCarea,jdbcType=VARCHAR},
			</if>
			<if test="companyCaddr != null">
				#{companyCaddr,jdbcType=VARCHAR},
			</if>
			<if test="companyEarnest != null">
				#{companyEarnest,jdbcType=VARCHAR},
			</if>
			<if test="companyTime != null and companyTime!=''">
				date_format(#{companyTime,jdbcType=VARCHAR},'%Y-%m-%d'),
			</if>
			<if test="companyTimestart != null and companyTimestart!=''">
				date_format(#{companyTimestart,jdbcType=VARCHAR},'%Y-%m-%d'),
			</if>
			<if test="companyTimeend != null and companyTimeend!=''">
				date_format(#{companyTimeend,jdbcType=VARCHAR},'%Y-%m-%d'),
			</if>



			<if test="lastModify != null and lastModify!=''">
				date_format(#{lastModify,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s'),
			</if>

			<if test="image != null">
				#{image,jdbcType=VARCHAR},
			</if>
			<if test="imageId != null">
				#{imageId,jdbcType=VARCHAR},
			</if>
			<if test="imageCid != null">
				#{imageCid,jdbcType=VARCHAR},
			</if>
			<if test="imageCodeid != null">
				#{imageCodeid,jdbcType=VARCHAR},
			</if>
			<if test="imageTaxid != null">
				#{imageTaxid,jdbcType=VARCHAR},
			</if>
			<if test="approved != null and approved!=''">
				#{approved,jdbcType=VARCHAR},
			</if>
			<if test="approveTime != null and approveTime!=''">
				date_format(#{approveTime,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s'),
			</if>
			<if test="approvedTime != null and approvedTime!=''">
				date_format(#{approvedTime,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s'),
			</if>
			<if test="applyTime != null and applyTime!=''">
				date_format(#{applyTime,jdbcType=VARCHAR},'%Y-%m-%d %H:%i:%s'),
			</if>

			<if test="bankName != null">
				#{bankName,jdbcType=VARCHAR},
			</if>
			<if test="companyType != null and companyType!=''">
				#{companyType,jdbcType=VARCHAR},
			</if>
			<if test="companyPhone != null and companyPhone!=''">
				#{companyPhone,jdbcType=VARCHAR},
			</if>
			<if test="bankCardid != null">
				#{bankCardid,jdbcType=VARCHAR},
			</if>
			<if test="isCheck != null and isCheck!=''">
				#{isCheck,jdbcType=VARCHAR},
			</if>
			<if test="companyRemark != null">
				#{companyRemark,jdbcType=LONGVARCHAR},
			</if>
			<if test="companyUrl != null">
				#{companyUrl,jdbcType=LONGVARCHAR},
			</if>
			<if test="disabled!=null and disabled!=''">
				#{disabled,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.cnit.yoyo.model.goods.CompanyWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		update t_company
		<set>

			<if test="shopName != null">
				shop_name = #{shopName,jdbcType=VARCHAR},
			</if>
			<if test="gradeId != null">
				grade_id = #{gradeId,jdbcType=BIGINT},
			</if>
			<if test="accountId != null">
				account_id = #{accountId,jdbcType=INTEGER},
			</if>
			<if test="storeName != null">
				store_name = #{storeName,jdbcType=VARCHAR},
			</if>
			<if test="storeGrade != null">
				store_grade = #{storeGrade,jdbcType=BIGINT},
			</if>
			<if test="regionId != null">
				region_id = #{regionId,jdbcType=BIGINT},
			</if>
			<if test="lastTime != null">
				last_time = #{lastTime,jdbcType=TIMESTAMP},
			</if>
			<if test="earnest != null">
				earnest = #{earnest,jdbcType=DOUBLE},
			</if>
			<if test="companyName != null">
				company_name = #{companyName,jdbcType=VARCHAR},
			</if>
			<if test="companyNo != null">
				company_no = #{companyNo,jdbcType=VARCHAR},
			</if>
			<if test="companyTaxno != null">
				company_taxno = #{companyTaxno,jdbcType=VARCHAR},
			</if>
			<if test="companyCodename != null">
				company_codename = #{companyCodename,jdbcType=VARCHAR},
			</if>
			<if test="companyIdname != null">
				company_idname = #{companyIdname,jdbcType=VARCHAR},
			</if>
			<if test="companyIdcard != null">
				company_idcard = #{companyIdcard,jdbcType=VARCHAR},
			</if>
			<if test="companyCname != null">
				company_cname = #{companyCname,jdbcType=VARCHAR},
			</if>
			<if test="companyCidcard != null">
				company_cidcard = #{companyCidcard,jdbcType=VARCHAR},
			</if>
			<if test="companyCharge != null">
				company_charge = #{companyCharge,jdbcType=VARCHAR},
			</if>
			<if test="companyCtel != null">
				company_ctel = #{companyCtel,jdbcType=VARCHAR},
			</if>
			<if test="companyArea != null">
				company_area = #{companyArea,jdbcType=VARCHAR},
			</if>
			
			<if test="companyCareaIds != null">
				company_carea_ids = #{companyCareaIds,jdbcType=VARCHAR},
			</if>
			<if test="companyAreaIds != null">
				company_area_ids = #{companyAreaIds,jdbcType=VARCHAR},
			</if>
			<if test="companyAddr != null">
				company_addr = #{companyAddr,jdbcType=VARCHAR},
			</if>
			<if test="companyCarea != null">
				company_carea = #{companyCarea,jdbcType=VARCHAR},
			</if>
			<if test="companyCaddr != null">
				company_caddr = #{companyCaddr,jdbcType=VARCHAR},
			</if>
			<if test="companyEarnest != null">
				company_earnest = #{companyEarnest,jdbcType=VARCHAR},
			</if>
			<if test="companyTime != null">
				company_time = #{companyTime,jdbcType=TIMESTAMP},
			</if>
			<if test="companyTimestart != null">
				company_timestart = #{companyTimestart,jdbcType=TIMESTAMP},
			</if>
			<if test="companyTimeend != null">
				company_timeend = #{companyTimeend,jdbcType=TIMESTAMP},
			</if>
			<if test="shopstatus != null">
				shopstatus = #{shopstatus,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				status = #{status,jdbcType=VARCHAR},
			</if>
			<if test="approved != null">
				approved = #{approved,jdbcType=VARCHAR},
			</if>
			<if test="certification != null">
				certification = #{certification,jdbcType=VARCHAR},
			</if>
			<if test="recommend != null">
				recommend = #{recommend,jdbcType=VARCHAR},
			</if>
			<if test="disabled != null">
				disabled = #{disabled,jdbcType=VARCHAR},
			</if>
			<if test="lastModify != null">
				last_modify = #{lastModify,jdbcType=TIMESTAMP},
			</if>
			<if test="dOrder != null">
				d_order = #{dOrder,jdbcType=INTEGER},
			</if>
			<if test="image != null">
				image = #{image,jdbcType=VARCHAR},
			</if>
			<if test="imageId != null">
				image_id = #{imageId,jdbcType=VARCHAR},
			</if>
			<if test="imageCid != null">
				image_cid = #{imageCid,jdbcType=VARCHAR},
			</if>
			<if test="imageCodeid != null">
				image_codeid = #{imageCodeid,jdbcType=VARCHAR},
			</if>
			<if test="imageTaxid != null">
				image_taxid = #{imageTaxid,jdbcType=VARCHAR},
			</if>
			<if test="approveTime != null">
				approve_time = #{approveTime,jdbcType=TIMESTAMP},
			</if>
			<if test="approvedTime != null">
				approved_time = #{approvedTime,jdbcType=TIMESTAMP},
			</if>
			<if test="applyTime != null">
				apply_time = #{applyTime,jdbcType=TIMESTAMP},
			</if>
			<if test="favCount != null">
				fav_count = #{favCount,jdbcType=INTEGER},
			</if>
			<if test="buyMCount != null">
				buy_m_count = #{buyMCount,jdbcType=INTEGER},
			</if>
			<if test="storeSpace != null">
				store_space = #{storeSpace,jdbcType=BIGINT},
			</if>
			<if test="storeUsedspace != null">
				store_usedspace = #{storeUsedspace,jdbcType=BIGINT},
			</if>
			<if test="experience != null">
				experience = #{experience,jdbcType=INTEGER},
			</if>
			<if test="alertNum != null">
				alert_num = #{alertNum,jdbcType=DECIMAL},
			</if>
			<if test="limitGoods != null">
				limit_goods = #{limitGoods,jdbcType=VARCHAR},
			</if>
			<if test="limitGoodsdown != null">
				limit_goodsdown = #{limitGoodsdown,jdbcType=VARCHAR},
			</if>
			<if test="limitNews != null">
				limit_news = #{limitNews,jdbcType=VARCHAR},
			</if>
			<if test="limitNewsValue != null">
				limit_news_value = #{limitNewsValue,jdbcType=INTEGER},
			</if>
			<if test="limitStore != null">
				limit_store = #{limitStore,jdbcType=VARCHAR},
			</if>
			<if test="limitStoredown != null">
				limit_storedown = #{limitStoredown,jdbcType=VARCHAR},
			</if>
			<if test="limitSales != null">
				limit_sales = #{limitSales,jdbcType=VARCHAR},
			</if>
			<if test="limitEarnest != null">
				limit_earnest = #{limitEarnest,jdbcType=VARCHAR},
			</if>
			<if test="storeCert != null">
				store_cert = #{storeCert,jdbcType=VARCHAR},
			</if>
			<if test="bankName != null">
				bank_name = #{bankName,jdbcType=VARCHAR},
			</if>
			<if test="companyType != null and companyType!=''">
				company_type = #{companyType,jdbcType=VARCHAR},
			</if>
			<if test="companyPhone != null and companyPhone!=''">
				company_phone = #{companyPhone,jdbcType=VARCHAR},
			</if>
			<if test="bankCardid != null">
				bank_cardid = #{bankCardid,jdbcType=VARCHAR},
			</if>
			<if test="isCheck != null">
				isCheck = #{isCheck,jdbcType=VARCHAR},
			</if>
			<if test="companyRemark != null">
				company_remark = #{companyRemark,jdbcType=LONGVARCHAR},
			</if>
			<if test="companyUrl != null">
				company_url = #{companyUrl,jdbcType=LONGVARCHAR},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=LONGVARCHAR},
			</if>
			<if test="approvedremark != null">
				approvedremark = #{approvedremark,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where company_id = #{companyId,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.cnit.yoyo.model.goods.CompanyWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		update t_company
		set grade_id = #{gradeId,jdbcType=BIGINT},
		shop_name =
		#{shopName,jdbcType=VARCHAR},
		account_id = #{accountId,jdbcType=INTEGER},
		store_name =
		#{storeName,jdbcType=VARCHAR},
		store_grade = #{storeGrade,jdbcType=BIGINT},
		region_id =
		#{regionId,jdbcType=BIGINT},
		last_time = #{lastTime,jdbcType=TIMESTAMP},
		earnest =
		#{earnest,jdbcType=DOUBLE},
		company_name = #{companyName,jdbcType=VARCHAR},
		company_no =
		#{companyNo,jdbcType=VARCHAR},
		company_taxno = #{companyTaxno,jdbcType=VARCHAR},
		company_codename =
		#{companyCodename,jdbcType=VARCHAR},
		company_idname = #{companyIdname,jdbcType=VARCHAR},
		company_idcard = #{companyIdcard,jdbcType=VARCHAR},
		company_cname =
		#{companyCname,jdbcType=VARCHAR},
		company_cidcard = #{companyCidcard,jdbcType=VARCHAR},
		company_charge = #{companyCharge,jdbcType=VARCHAR},
		company_ctel = #{companyCtel,jdbcType=VARCHAR},
		company_area = #{companyArea,jdbcType=VARCHAR},
		company_carea_ids = #{companyCareaIds,jdbcType=VARCHAR},
		company_area_ids = #{companyAreaIds,jdbcType=VARCHAR},
		company_addr = #{companyAddr,jdbcType=VARCHAR},
		company_carea = #{companyCarea,jdbcType=VARCHAR},
		company_caddr = #{companyCaddr,jdbcType=VARCHAR},
		company_earnest = #{companyEarnest,jdbcType=VARCHAR},
		company_time =
		#{companyTime,jdbcType=TIMESTAMP},
		company_timestart = #{companyTimestart,jdbcType=TIMESTAMP},
		company_timeend = #{companyTimeend,jdbcType=TIMESTAMP},
		shopstatus = #{shopstatus,jdbcType=VARCHAR},
		status = #{status,jdbcType=VARCHAR},
		approved = #{approved,jdbcType=VARCHAR},
		certification =
		#{certification,jdbcType=VARCHAR},
		recommend = #{recommend,jdbcType=VARCHAR},
		disabled =
		#{disabled,jdbcType=VARCHAR},
		last_modify = #{lastModify,jdbcType=TIMESTAMP},
		d_order =
		#{dOrder,jdbcType=INTEGER},
		image = #{image,jdbcType=VARCHAR},
		image_id =
		#{imageId,jdbcType=VARCHAR},
		image_cid = #{imageCid,jdbcType=VARCHAR},
		image_codeid =
		#{imageCodeid,jdbcType=VARCHAR},
		image_taxid = #{imageTaxid,jdbcType=VARCHAR},
		approve_time =
		#{approveTime,jdbcType=TIMESTAMP},
		approved_time = #{approvedTime,jdbcType=TIMESTAMP},
		apply_time =
		#{applyTime,jdbcType=TIMESTAMP},
		fav_count = #{favCount,jdbcType=INTEGER},
		buy_m_count =
		#{buyMCount,jdbcType=INTEGER},
		store_space = #{storeSpace,jdbcType=BIGINT},
		store_usedspace =
		#{storeUsedspace,jdbcType=BIGINT},
		experience = #{experience,jdbcType=INTEGER},
		alert_num =
		#{alertNum,jdbcType=DECIMAL},
		limit_goods = #{limitGoods,jdbcType=VARCHAR},
		limit_goodsdown =
		#{limitGoodsdown,jdbcType=VARCHAR},
		limit_news = #{limitNews,jdbcType=VARCHAR},
		limit_news_value =
		#{limitNewsValue,jdbcType=INTEGER},
		limit_store = #{limitStore,jdbcType=VARCHAR},
		limit_storedown =
		#{limitStoredown,jdbcType=VARCHAR},
		limit_sales = #{limitSales,jdbcType=VARCHAR},
		limit_earnest =
		#{limitEarnest,jdbcType=VARCHAR},
		store_cert = #{storeCert,jdbcType=VARCHAR},
		bank_name =
		#{bankName,jdbcType=VARCHAR},
		company_type =
		#{companyType,jdbcType=VARCHAR},
		company_phone =
		#{companyPhone,jdbcType=VARCHAR},
		bank_cardid = #{bankCardid,jdbcType=VARCHAR},
		isCheck = #{isCheck,jdbcType=VARCHAR},
		company_remark =
		#{companyRemark,jdbcType=LONGVARCHAR},
		company_url = #{companyUrl,jdbcType=LONGVARCHAR},
		remark =
		#{remark,jdbcType=LONGVARCHAR},
		approvedremark = #{approvedremark,jdbcType=LONGVARCHAR}
		where
		company_id = #{companyId,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.cnit.yoyo.model.goods.Company">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis Generator, do not modify. 
			This element was generated on Mon Mar 09 14:02:09 CST 2015. -->
		update t_company
		set grade_id = #{gradeId,jdbcType=BIGINT},
		shop_name =
		#{shopName,jdbcType=VARCHAR},
		account_id = #{accountId,jdbcType=INTEGER},
		store_name =
		#{storeName,jdbcType=VARCHAR},
		store_grade = #{storeGrade,jdbcType=BIGINT},
		region_id =
		#{regionId,jdbcType=BIGINT},
		last_time = #{lastTime,jdbcType=TIMESTAMP},
		earnest =
		#{earnest,jdbcType=DOUBLE},
		company_name = #{companyName,jdbcType=VARCHAR},
		company_no =
		#{companyNo,jdbcType=VARCHAR},
		company_taxno = #{companyTaxno,jdbcType=VARCHAR},
		company_codename =
		#{companyCodename,jdbcType=VARCHAR},
		company_idname = #{companyIdname,jdbcType=VARCHAR},
		company_idcard = #{companyIdcard,jdbcType=VARCHAR},
		company_cname =
		#{companyCname,jdbcType=VARCHAR},
		company_cidcard = #{companyCidcard,jdbcType=VARCHAR},
		company_charge = #{companyCharge,jdbcType=VARCHAR},
		company_ctel = #{companyCtel,jdbcType=VARCHAR},
		company_area = #{companyArea,jdbcType=VARCHAR},
		company_carea_ids = #{companyCareaIds,jdbcType=VARCHAR},
		company_area_ids = #{companyAreaIds,jdbcType=VARCHAR},
		company_addr = #{companyAddr,jdbcType=VARCHAR},
		company_carea = #{companyCarea,jdbcType=VARCHAR},
		company_caddr = #{companyCaddr,jdbcType=VARCHAR},
		company_earnest = #{companyEarnest,jdbcType=VARCHAR},
		company_time =
		#{companyTime,jdbcType=TIMESTAMP},
		company_timestart = #{companyTimestart,jdbcType=TIMESTAMP},
		company_timeend = #{companyTimeend,jdbcType=TIMESTAMP},
		shopstatus = #{shopstatus,jdbcType=VARCHAR},
		status = #{status,jdbcType=VARCHAR},
		approved = #{approved,jdbcType=VARCHAR},
		certification =
		#{certification,jdbcType=VARCHAR},
		recommend = #{recommend,jdbcType=VARCHAR},
		disabled =
		#{disabled,jdbcType=VARCHAR},
		last_modify = #{lastModify,jdbcType=TIMESTAMP},
		d_order =
		#{dOrder,jdbcType=INTEGER},
		image = #{image,jdbcType=VARCHAR},
		image_id =
		#{imageId,jdbcType=VARCHAR},
		image_cid = #{imageCid,jdbcType=VARCHAR},
		image_codeid =
		#{imageCodeid,jdbcType=VARCHAR},
		image_taxid = #{imageTaxid,jdbcType=VARCHAR},
		approve_time =
		#{approveTime,jdbcType=TIMESTAMP},
		approved_time = #{approvedTime,jdbcType=TIMESTAMP},
		apply_time =
		#{applyTime,jdbcType=TIMESTAMP},
		fav_count = #{favCount,jdbcType=INTEGER},
		buy_m_count =
		#{buyMCount,jdbcType=INTEGER},
		store_space = #{storeSpace,jdbcType=BIGINT},
		store_usedspace =
		#{storeUsedspace,jdbcType=BIGINT},
		experience = #{experience,jdbcType=INTEGER},
		alert_num =
		#{alertNum,jdbcType=DECIMAL},
		limit_goods = #{limitGoods,jdbcType=VARCHAR},
		limit_goodsdown =
		#{limitGoodsdown,jdbcType=VARCHAR},
		limit_news = #{limitNews,jdbcType=VARCHAR},
		limit_news_value =
		#{limitNewsValue,jdbcType=INTEGER},
		limit_store = #{limitStore,jdbcType=VARCHAR},
		limit_storedown =
		#{limitStoredown,jdbcType=VARCHAR},
		limit_sales = #{limitSales,jdbcType=VARCHAR},
		limit_earnest =
		#{limitEarnest,jdbcType=VARCHAR},
		store_cert = #{storeCert,jdbcType=VARCHAR},
		bank_name =
		#{bankName,jdbcType=VARCHAR},
		company_type =
		#{companyType,jdbcType=VARCHAR},
		company_phone =
		#{companyPhone,jdbcType=VARCHAR},
		bank_cardid = #{bankCardid,jdbcType=VARCHAR},
		isCheck = #{isCheck,jdbcType=VARCHAR}
		where company_id =
		#{companyId,jdbcType=BIGINT}
	</update>

	<update id="updateShopById" parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO">
		update t_company
		<trim prefix="set " suffixOverrides=",">
			<if test="approved != null and approved!=''">
				approved = #{approved,jdbcType=VARCHAR},
			</if>
			<if test="disabled != null and disabled!=''">
				disabled = #{disabled,jdbcType=VARCHAR},
			</if>
			<if test="imageId != null">
				image_id = #{imageId,jdbcType=VARCHAR},
			</if>
			<if test="imageCid != null">
				image_cid = #{imageCid,jdbcType=VARCHAR},
			</if>
			<if test="imageCodeid != null">
				image_codeid = #{imageCodeid,jdbcType=VARCHAR},
			</if>
			<if test="imageTaxid != null">
				image_taxid = #{imageTaxid,jdbcType=VARCHAR},
			</if>
		</trim>
		where company_id=#{companyId,jdbcType=BIGINT}
	</update>


	<select id="findByIdcard" parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO" resultType="java.lang.Integer">
		select
		count(company_id) from t_company where company_idcard=#{companyIdcard,jdbcType=VARCHAR} and disabled='0'
		<trim prefix="and ">
	  	     <if test="companyId!=0 and companyId!=null">
	  	         company_id != #{companyId,jdbcType=INTEGER}
	  	     </if>
  		</trim>

	</select>

	<!-- 根据account_id连接查询，应该只会查到一条 -->
	<select id="findById" parameterType="java.lang.Long" resultMap="CompanyDTOResultMap">
		select
		<include refid="Companydto_Column_List" />
		,
		(select group_concat(tcr.cat_id) from t_company_region tcr where tcr.company_id=#{companyId,jdbcType=BIGINT} and tcr.disbaled='0' group by tcr.company_id ) as catIds,
		tbs.store_idcardname,tbs.store_idcard,tbs.tel
		from t_company join t_business_storemanger tbs
		on
		t_company.account_id = tbs.account_id
		where t_company.company_id=#{companyId,jdbcType=BIGINT} limit 1

	</select>

	<update id="updateShopInfoById" parameterType="com.cnit.yoyo.model.goods.CompanyWithBLOBs">

		update t_company
		<set>

			<if test="companyCarea != null and companyCarea!=''">
				company_carea = #{companyCarea,jdbcType=VARCHAR},
			</if>
			<if test="companyCaddr != null and companyCaddr!=''">
				company_caddr = #{companyCaddr,jdbcType=VARCHAR},
			</if>
			<if test="image != null and image!=''">
				image = #{image,jdbcType=VARCHAR},
			</if>
			<if test="companyCname != null and companyCname!=''">
				company_cname=#{companyCname,jdbcType=VARCHAR},
			</if>
			<if test="companyCidcard != null and companyCidcard!=''">
				company_cidcard=#{companyCidcard,jdbcType=VARCHAR},
			</if>
			
			<if test="companyCareaIds != null and companyCareaIds!=''">
				company_carea_ids=#{companyCareaIds,jdbcType=VARCHAR},
			</if>

			<if test="companyCtel != null and companyCtel!=''">
				company_ctel=#{companyCtel,jdbcType=VARCHAR},
			</if>

			<if test="companyUrl != null and companyUrl!=''">
				company_url = #{companyUrl,jdbcType=LONGVARCHAR},
			</if>

			<if test="companyRemark != null and companyRemark!=''">
				company_remark = #{companyRemark,jdbcType=LONGVARCHAR},
			</if>

		</set>
		where company_id = #{companyId,jdbcType=BIGINT}
	</update>

	<!-- 查询店铺等级 -->
	<select id="findGradeById" parameterType="java.lang.Long"
		resultMap="com.cnit.yoyo.dao.shop.ShopGradeMapper.BaseResultMap">

		SELECT distinct s.* from t_company t JOIN t_company_storegrade s ON
		t.grade_id=s.grade_id where
		t.company_id= #{companyId,jdbcType=BIGINT}

	</select>

	<resultMap id="CompanyAndStoreMap" type="com.cnit.yoyo.model.goods.CompanyAndStoreBean">
		<id column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="issue_type" property="issueType" jdbcType="VARCHAR" />
		<result column="shop_name" property="shopName" jdbcType="VARCHAR" />
		<result column="account_id" property="accountId" jdbcType="INTEGER" />
		<result column="store_name" property="storeName" jdbcType="VARCHAR" />
		<result column="store_grade" property="storeGrade" jdbcType="BIGINT" />
		<result column="company_name" property="companyName" jdbcType="VARCHAR" />
		<collection property="stores" column="company_id" ofType="com.cnit.yoyo.model.goods.StoreBean"
			select="selectStoreByCompanyId"></collection>
	</resultMap>

	<select id="selectCompanyAndStoreById" resultMap="CompanyAndStoreMap">
		SELECT
		T.COMPANY_ID,
		P.ISSUE_TYPE,
		T.SHOP_NAME,
		T.ACCOUNT_ID,
		T.STORE_NAME,
		T.STORE_GRADE,
		T.COMPANY_NAME
		FROM
		T_COMPANY T,T_COMPANY_STOREGRADE P
		WHERE P.GRADE_ID = T.GRADE_ID AND
		T.COMPANY_ID = #{companyId,jdbcType=BIGINT}
	</select>
	<resultMap type="com.cnit.yoyo.model.goods.StoreBean" id="StoresMap">
		<id column="store_id" property="storeId" jdbcType="BIGINT" />
		<result column="account_id" property="accountId" jdbcType="INTEGER" />
		<result column="store_name" property="storeName" jdbcType="VARCHAR" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="disabled" property="disabled" jdbcType="VARCHAR" />
		<result column="limit_goods" property="limitGoods" jdbcType="VARCHAR" />
	</resultMap>
	<select id="selectStoreByCompanyId" parameterType="int" resultMap="StoresMap">
		SELECT T.STORE_ID,T.ACCOUNT_ID,T.limit_goods,
		T.STORE_NAME, T.COMPANY_ID, T.DISABLED
		FROM T_BUSINESS_STOREMANGER T WHERE T.DISABLED = '0' AND
		T.COMPANY_ID = #{companyId,jdbcType=BIGINT}
	</select>
	
	
	<!-- 根据店铺等级查找店铺 -->
	<select id="findCompanyByGradeId" resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from t_company
		where disabled='0' and  grade_id in
		<foreach collection="array" index="index" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	
	</select>
	
	<!-- 按条件查询所有店铺 -->
	<select id="findShopListByParam" resultMap="CompanyDTOResultMap" parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO">
		select (SELECT  group_concat(tcrc.region_name) FROM t_company_region tcrs LEFT JOIN t_company_region_cat tcrc ON tcrs.cat_id=tcrc.region_id WHERE tcrs.disbaled='0' 
		and  tcrs.company_id=t.company_id GROUP BY tcrs.company_id) as regionCatName, 
		ts.issue_type,t.* from t_company t left join t_company_storegrade ts ON  t.grade_id=ts.grade_id
		where t.disabled='0'
		<if test="companyName != null and companyName!=''">
			and	t.company_name like CONCAT('%',#{companyName,jdbcType=VARCHAR},'%')
		</if>
		
		<if test="issueType != null and issueType!=''">
			and	ts.issue_type=#{issueType,jdbcType=VARCHAR} 
		</if>
		<if test="storeName != null and storeName!=''">
			and	t.store_name like CONCAT('%',#{storeName,jdbcType=VARCHAR},'%')
		</if>
		<if test="shopName != null and shopName!=''">
			and	t.shop_name like CONCAT('%',#{shopName,jdbcType=VARCHAR},'%')
		</if>
		<if test="companyRemark != null and companyRemark!=''">
			and	t.company_remark like CONCAT('%',#{companyRemark,jdbcType=LONGVARCHAR},'%')
		</if>
		<if test="approved != null and approved!=''">
			and	t.approved=#{approved,jdbcType=VARCHAR}
		</if>
		<if test="approved == null or approved==''"> <!-- 默认显示待审核与审核未通过的 -->
			and (t.approved='0' or t.approved='2')
		</if>
		<if test="approvedTimeStart != null and approvedTimeStart!=''">
			and	<![CDATA[ t.approved_time >= date_format(#{approvedTimeStart,jdbcType=VARCHAR},'%Y-%m-%d')]]>
		</if>
		<if test="approvedTimeEnd != null and approvedTimeEnd!=''">
			and	<![CDATA[ t.approved_time<=date_format(#{approvedTimeEnd,jdbcType=VARCHAR},'%Y-%m-%d')]]>
		</if>
		<if test="applyTimeStart != null and applyTimeStart!=''">
			and	<![CDATA[ t.apply_time >= date_format(#{applyTimeStart,jdbcType=VARCHAR},'%Y-%m-%d')]]>
		</if>
		<if test="applyTimeEnd != null and applyTimeEnd!=''">
			and	<![CDATA[ t.apply_time <= date_format(#{applyTimeEnd,jdbcType=VARCHAR},'%Y-%m-%d')]]>
		</if>
	     <if test="orderStmt != null">
			ORDER BY ${orderStmt}
		</if>
	</select>
	<!-- 根据店铺id查找店铺详情 -->
	<select id="findShopDetailByCompanyId" parameterType="java.lang.Integer" resultMap="CompanyDTOResultMap">
		SELECT tcs.issue_type,tcs.issue_money ,tm.email,tbs.store_idcardname ,tbs.store_idcard,tbs.tel,tpa.LOGIN_NAME,t.* ,
		(select group_concat(tcr.cat_id) from t_company_region tcr where tcr.company_id=t.company_id and tcr.disbaled='0' group by tcr.company_id ) as catIds,
		(SELECT  group_concat(tcrc.region_name) FROM t_company_region tcrs LEFT JOIN t_company_region_cat tcrc ON tcrs.cat_id=tcrc.region_id WHERE tcrs.disbaled='0' and  tcrs.company_id=t.company_id GROUP BY tcrs.company_id) as regionCatName
		from t_company t  JOIN t_pam_account tpa ON
		t.account_id=tpa.ACCOUNT_ID JOIN t_business_storemanger tbs ON (t.account_id=tbs.account_id AND t.company_id=tbs.company_id)
		LEFT JOIN  t_members tm ON t.ACCOUNT_ID=tm.ACCOUNT_ID
		LEFT JOIN t_company_storegrade tcs ON t.grade_id=tcs.grade_id
		WHERE t.disabled='0' and t.company_id=#{companyId,jdbcType=BIGINT} ORDER BY tbs.store_id limit 1 
	</select>
	
	<!-- 更新店铺的经验值或保证金 -->
	<update id="updateExperienceAndEarnest" parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO">
		update t_company
		set experience = (experience+#{experience,jdbcType=INTEGER}),
		earnest =(earnest+	#{earnest,jdbcType=DOUBLE}) 
		where company_id=#{companyId,jdbcType=BIGINT}
	</update>
	
	<!-- 更新店铺的审核状态 -->
	<update id="updateShop" parameterType="java.util.Map">
	    update t_company
	    set approved = #{approved},
	    disabled=#{disabled},
		approvedremark = #{approvedremark} ,
		isCheck = #{isCheck},
		approve_time = now()
		<if test="_parameter.containsKey('approvedTime')">
		  ,approved_time=now()
		</if>
		where company_id in 
		<foreach collection="ids" index="index" item="item" separator="," open="(" close=")">
			#{item}
		</foreach>
	</update>
	
	<!-- 删除店铺 -->
	<update id="deleteShop" parameterType="java.util.Map">
	    update t_company
		set disabled='1' 
		where company_id in 
		<foreach collection="ids" index="index" item="item" separator="," open="(" close=")">
			#{item}
		</foreach>
	</update>
	
	<!-- 选择地区分店 -->
	<select id="selectStore"  parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO" resultMap="StoreMap">
		SELECT T.STORE_ID,T.ACCOUNT_ID,T.COMPANY_ID,
		T.STORE_NAME, T.COMPANY_ID, T.area, t.addr,t.tel
		FROM T_BUSINESS_STOREMANGER T 
		WHERE T.DISABLED = '0' 
		<if test="companyId !=null">
			AND T.COMPANY_ID = #{companyId,jdbcType=BIGINT}
		</if>
		<if test="companyArea !=null and !''.equals(companyArea.trim())">
			AND T.area like CONCAT('%',#{companyArea,jdbcType=VARCHAR},'%')
		</if>
	</select>
	<resultMap type="com.cnit.yoyo.model.goods.Store" id="StoreMap">
		<id column="store_id" property="storeId" jdbcType="BIGINT" />
		<result column="account_id" property="accountId" jdbcType="INTEGER" />
		<result column="store_name" property="storeName" jdbcType="VARCHAR" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="area" property="area" jdbcType="VARCHAR" />
		<result column="addr" property="addr" jdbcType="VARCHAR" />
	</resultMap>
	
	
	
		<!-- 更新店铺的有效期 -->
	<update id="updateShopTime" parameterType="java.util.Map">
	    update t_company
		set last_time = #{lastTime}
		where company_id in 
		<foreach collection="ids" index="index" item="item" separator="," open="(" close=")">
			#{item}
		</foreach>
	</update>
	
	<!-- 更新状态 -->
	<update id="updateShopGoodCheck" parameterType="java.util.Map">
		 update t_company set isCheck=#{isCheck} where company_id = #{companyId}
	</update>
	
	
	<!-- 查找店铺是否需要审核 -->
	<select id="findCheckById" parameterType="java.lang.Long" resultMap="CompanyDTOResultMap">
		select
		 group_concat(tcc.cat_id) as catIds,
         t.* FROM t_company t LEFT JOIN t_company_check_category tcc ON tcc.company_id=t.company_id
		where t.company_id=#{companyId,jdbcType=BIGINT}   GROUP BY t.company_id
	</select>
	
	<!-- 查询店铺是否被限制发布商品,限制的店铺数与总店数是否相同 -->
	<select id="findStoreForbidden" parameterType="java.lang.Long" resultType="java.lang.Integer">
	SELECT if(a.limitNum=b.sumNum,0,1) from (
     
	SELECT count(*) as limitNum FROM t_business_storemanger tbs WHERE tbs.disabled='0' and tbs.company_id=#{companyId}  and tbs.limit_goods='1') as a
	,
	(SELECT count(*) as sumNum FROM t_business_storemanger tbs WHERE tbs.disabled='0' and tbs.company_id=#{companyId} ) as b
	</select>
	
	
	<!-- 更新部分信息 -->
	<update id="updateShopAllInfo" parameterType="com.cnit.yoyo.model.goods.dto.CompanyDTO">
		update t_company
		<set>

			<if test="shopName != null and shopName!=''">
				shop_name = #{shopName,jdbcType=VARCHAR},
			</if>
			<if test="gradeId != null and gradeId!=0">
				grade_id = #{gradeId,jdbcType=BIGINT},
			</if>
			
			<if test="storeName != null and storeName!=''">
				store_name = #{storeName,jdbcType=VARCHAR},
			</if>
			<if test="storeGrade != null and storeGrade!=0">
				store_grade = #{storeGrade,jdbcType=BIGINT},
			</if>
			
			<if test="lastTime != null and lastTime!=''">
				last_time = #{lastTime,jdbcType=TIMESTAMP},
			</if>
			<if test="earnest != null and earnest!=0">
				earnest = #{earnest,jdbcType=DOUBLE},
			</if>
			<if test="companyName != null and companyName!=''">
				company_name = #{companyName,jdbcType=VARCHAR},
			</if>
			<if test="companyNo != null and companyNo!=''">
				company_no = #{companyNo,jdbcType=VARCHAR},
			</if>
			<if test="companyTaxno != null and companyTaxno!=''">
				company_taxno = #{companyTaxno,jdbcType=VARCHAR},
			</if>
			<if test="companyCodename != null and companyCodename!=''">
				company_codename = #{companyCodename,jdbcType=VARCHAR},
			</if>
			<if test="companyIdname != null and companyIdname!=''">
				company_idname = #{companyIdname,jdbcType=VARCHAR},
			</if>
			<if test="companyIdcard != null and companyIdcard!=''">
				company_idcard = #{companyIdcard,jdbcType=VARCHAR},
			</if>
			<if test="companyCname != null and companyCname!=''">
				company_cname = #{companyCname,jdbcType=VARCHAR},
			</if>
			<if test="companyCidcard != null and companyCidcard!=''">
				company_cidcard = #{companyCidcard,jdbcType=VARCHAR},
			</if>
			<if test="companyCharge != null and companyCharge!=''" >
				company_charge = #{companyCharge,jdbcType=VARCHAR},
			</if>
			<if test="companyCtel != null and companyCtel!=''">
				company_ctel = #{companyCtel,jdbcType=VARCHAR},
			</if>
			<if test="companyArea != null and companyArea!=''">
				company_area = #{companyArea,jdbcType=VARCHAR},
			</if>
			<if test="companyAreaIds != null and companyAreaIds!=''">
				company_area_ids = #{companyAreaIds,jdbcType=VARCHAR},
			</if>
			<if test="companyCareaIds != null and companyCareaIds!=''">
				company_carea_ids = #{companyCareaIds,jdbcType=VARCHAR},
			</if>
			<if test="companyAddr != null and companyAddr!=''">
				company_addr = #{companyAddr,jdbcType=VARCHAR},
			</if>
			<if test="companyCarea != null and companyCarea!=''">
				company_carea = #{companyCarea,jdbcType=VARCHAR},
			</if>
			<if test="companyCaddr != null  and companyCaddr!=''">
				company_caddr = #{companyCaddr,jdbcType=VARCHAR},
			</if>
			<if test="companyEarnest != null and companyEarnest!=''">
				company_earnest = #{companyEarnest,jdbcType=VARCHAR},
			</if>
			<if test="companyTime != null and companyTime!=''">
				company_time = #{companyTime,jdbcType=TIMESTAMP},
			</if>
			<if test="companyTimestart != null and companyTimestart!=''">
				company_timestart = #{companyTimestart,jdbcType=TIMESTAMP},
			</if>
			<if test="companyTimeend != null and companyTimeend!=''" >
				company_timeend = #{companyTimeend,jdbcType=TIMESTAMP},
			</if>
			
		
			<if test="approved != null and approved!=''">
				approved = #{approved,jdbcType=VARCHAR},
			</if>
			
			
			
			<if test="lastModify != null and lastModify!=''">
				last_modify = #{lastModify,jdbcType=TIMESTAMP},
			</if>
			
			<if test="image != null and image!=''">
				image = #{image,jdbcType=VARCHAR},
			</if>
			<if test="imageId != null">
				image_id = #{imageId,jdbcType=VARCHAR},
			</if>
			<if test="imageCid != null">
				image_cid = #{imageCid,jdbcType=VARCHAR},
			</if>
			<if test="imageCodeid != null">
				image_codeid = #{imageCodeid,jdbcType=VARCHAR},
			</if>
			<if test="imageTaxid != null">
				image_taxid = #{imageTaxid,jdbcType=VARCHAR},
			</if>
			<if test="approveTime != null and approveTime!=''">
				approve_time = #{approveTime,jdbcType=TIMESTAMP},
			</if>
			<if test="approvedTime != null and approvedTime!=''">
				approved_time = #{approvedTime,jdbcType=TIMESTAMP},
			</if>
			
			
		
			
			<if test="bankName != null">
				bank_name = #{bankName,jdbcType=VARCHAR},
			</if>
			<if test="bankCardid != null">
				bank_cardid = #{bankCardid,jdbcType=VARCHAR},
			</if>
			
			<if test="companyRemark != null">
				company_remark = #{companyRemark,jdbcType=LONGVARCHAR},
			</if>
			<if test="companyUrl != null">
				company_url = #{companyUrl,jdbcType=LONGVARCHAR},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=LONGVARCHAR},
			</if>
			<if test="companyPhone != null and companyPhone!=''">
				company_phone = #{companyPhone,jdbcType=VARCHAR},
			</if>
		</set>
		where company_id = #{companyId,jdbcType=BIGINT}
	</update>
	
	<update id="decreEarnestById" >
	    update t_company
		set  earnest = earnest - #{earnest}
		where company_id = #{companyId}
	</update>
	
	
	<select id="findEnabled" parameterType="java.lang.Integer" resultType="java.lang.Integer">
		SELECT count(*) from t_company where <![CDATA[ last_time<=NOW() ]]> and company_id=#{companyId}
	</select>
	
	<!-- 根据账号进行判断是已经关联集团 -->
	<select id="findByAccountId" parameterType="java.lang.Integer" resultType="java.lang.Integer">
		select count(company_id) from t_company where disabled='0' AND account_id=#{accountId}
	</select>
	
	
		<resultMap id="ShopDetailInfoDTOMap" type="com.cnit.yoyo.model.shop.dto.ShopDetailInfoDTO">
		<id column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="shop_name" property="shopName" jdbcType="VARCHAR" />
		<result column="account_id" property="accountId" jdbcType="INTEGER" />
		<result column="store_name" property="storeName" jdbcType="VARCHAR" />
		<result column="company_caddr" property="storeAddr" jdbcType="VARCHAR" />
		<result column="company_ctel" property="storeTel" jdbcType="VARCHAR" />
		<result column="image" property="image" jdbcType="VARCHAR" />
	</resultMap>
	
	<select id="findShopDetail" parameterType="java.lang.Long" resultMap="ShopDetailInfoDTOMap">
		select company_id,account_id,shop_name,store_name,company_caddr,company_ctel,image from t_company  where company_id=#{companyId}
	</select>
</mapper>